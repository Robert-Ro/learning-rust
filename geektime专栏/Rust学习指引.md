# Rust学习指引-- 让Rust成为你的下一门主力语言

> 使用合适的工具解决合适的问题

## Rust优点

- Rust是一门非常重视开发者用户提现的语言。Rust在编译期告知了代码错误的同时，还极尽可能，给你推荐正确的代码。

- 总所周知的优异性能和强大的表现力，让Rust在很多场合都能施展拳脚。

  ![](https://static001.geekbang.org/resource/image/8f/21/8f0385d2fc8f5cc003f0b479de44be21.jpg?wh=3989x2135)

  - 操作系统
  - 高性能网络
  - 高并发后端
  - 客户端软件

- 越用越享受

  - 操作简单的bit
  - 处理大容量的parquet
  - 直面CPU乱序指令的atomics
  - 像Golang一样的高级封装的channel
  - 生态丰富

## 学习Rust的难点

Rust被公认为是很难学的语言，学习曲线很陡峭。作为一门一门有着自己独特思想的语言，Rust集百家之长：

- C++：强化了move语义和RAII
- Cyclone：生命周期
- Haskell：函数式编程和类型系统等

学习Rust需要思维转换：

- 从命令式（imperative）编程语言转换到函数式（functional）编程语言
- 从变量的可变性（mutable）迁移到不可变性（immutable）
- 从弱类型语言迁移到强类型语言
- 从手工或者自动内存管理到通过生命周期来管理内存

最大的思维转换就是**变量的所有权和生命周期**

从语言的内核来看，Rust重塑了我们对一些基本概念的理解。
- 清晰地定义了变量在一个作用域下的生命周期，让开发者在摒弃垃圾回收这样的内存和性能杀手的前提下，还能够无需关心手动内存管理，**让内存安全和高性能二者兼得**

从语言外观来看，它使用起来感觉很像Python/Typescript这样的高级语言，表达能力一流，但性能丝毫不输于C/C++，**从而让表达力和高性能二者兼得**

总之：**高表达力**、**高性能**、**内存安全**

## 如何学好Rust
> 任何语言的学习都离不开**精准学习** + **刻意练习**
### 精准学习
深挖一个个高大上的表层知识点，回归底层基础知识的本原，再使用**类比**、**联想**等方法，打通涉及的基础知识；然后从底层设计往表层实现，一层层构建知识体系，这样“撒一层土，夯实，再撒一层”，让你对知识点理解得更透彻、掌握得牢固。

比如 Rust 中的所有权和生命周期，很多同学说自己看书或者看其他资料，这部分都学得云里雾里的，即便深入逐一理解了几条基本规则，也依旧似懂非懂。

但我们进一步思考“**值在内存中的访问规则**”，最后回归到**堆**和**栈**这些最基础的软件开发的概念，重新认识堆栈上的值的存储方式和生命周期之后，再一层层往上，我们就会越学越明白。

这就是回归本原的重要性，也就是常说的**第一性原理**：回归事物最基础的条件，将其拆分成基本要素解构分析，来探索要解决的问题。
![](https://static001.geekbang.org/resource/image/60/51/605094c2dc6992997e31f687dc908751.jpg?wh=2646x3048)
### 刻意练习
精准学习之后，我们就需要刻意练习了。刻意练习，就是用**精巧设计的例子**，**通过练习进一步巩固学到的知识**，并且在这个过程中尝试发现学习过程中的不自知问题，让自己从“我不知道我不知道”走向“我知道我不知道”，最终能够在下一个循环中弥补知识的漏洞。

这个过程就像子思在《中庸》里谈治学的方法：博学之，审问之，慎思之，明辨之，笃行之。我们学习就要这样，学了没有学会绝不罢休，不断在学习 - 构建 - 反思这个循环中提升自己。Rust 的学习，也是如此。
![](https://static001.geekbang.org/resource/image/af/98/af815a24607879d14d9b2701c0491a98.jpg?wh=3645x2506)

### 知识体系
#### 1.前置知识
软件开发的基础概念：堆、栈、函数、闭包、虚表、泛型、同步和异步等。你要知道，想要学好任意一门编程语言，首先要吃透涉及的概念，**因为编程语言，不过是这些概念的具体表述和载体**。
#### 2.基础知识
- 写代码直观感受Rust的魅力
- 回归理性，深入浅出地`Rust`变量的所有权和生命周期，并对比几种主流的内存管理方式，包括，`Rust`的内存管理方式、`C`的手工管理、`Java`的`GC`、`Swift`的 `ARC` 。之后围绕着所有权和生命周期，来讨论 Rust 的几大语言特性：函数式编程特性、类型系统、泛型编程以及错误处理。
#### 3.进阶篇
Pascal 之父，图灵奖得主尼古拉斯·沃斯（Niklaus Wirth）有一个著名的公式：**算法 + 数据结构 = 程序**。**想随心所欲地使用 Rust 为你的系统构建数据结构，深度掌握类型系统必不可少**。

在`Rust`里，你可以使用`Trait`做接口设计、使用泛型做编译期多态、使用`Trait Object`做运行时多态。在你的代码里用好`Trait`和泛型，可以非常高效地解决复杂的问题。

随后我们会介绍`unsafe rust`，不要被这个名字吓到。所谓`unsafe`，不过是把 Rust 编译器在编译器做的严格检查退步成为`C++`的样子，由开发者自己为其所撰写的代码的正确性做担保。

最后我们还会讲到`FFI`，**这是`Rust`和其它语言互通操作的桥梁**。掌握好`FFI`，你就可以用`Rust`为你的`Python/JavaScript/Elixir/Swift`等主力语言在关键路径上提供更高的性能，也能很方便地引入`Rust`生态中特定的库。
#### 4.并发篇
从没有一门语言像`Rust`这样，在提供如此广博的并发原语支持的前提下，还能保证并发安全，所以`Rust`敢自称无畏并发（Fearless Concurrency）。在并发篇，我带你从`atomics`一路向上，历经`Mutex`、`Semaphore`、`Channel`，直至`actor model`。其他语言中被标榜为实践典范的并发手段，在`Rust`这里，只不过是一种并发工具。
#### 5.实战篇
- 掌握一门语言的特性，能应用这些特性，写出解决一些小问题的代码，算是初窥门径，就像在游泳池里练习冲浪
- 我们会学习如何把 Rust 应用在生产环境中、如何使用 Rust 的编程思想解决实际问题，
- 最后谈谈如何用 Rust 构建复杂的软件系统。

![](https://static001.geekbang.org/resource/image/1c/8d/1cf03ee698cyy875e8fac45b8ed5f88d.jpg?wh=3392x2135)
## Reference

- [
  陈天 · Rust 编程第一课](https://time.geekbang.org/column/article/408400)

